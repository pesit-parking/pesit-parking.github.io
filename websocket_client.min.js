function init(){if(output=document.getElementById("output"),attributes_log=document.getElementById("attributes_log"),!1!==browserSupportsWebSockets())(websocket=new WebSocket(wsUri)).onopen=function(){register()},websocket.onmessage=function(e){onMessage(e)},websocket.onerror=function(e){onError(e)};else{writeToScreen("Sorry! your web browser does not support WebSockets. Try using Google Chrome or Firefox Latest Versions");var e=document.getElementById("websocketelements");e.parentNode.removeChild(e)}}function onClose(e){websocket.close()}function onMessage(e){handleRcvMsg(e.data)}function onError(e){}function doSend(e){websocket.send(e)}function writeAttributeValues(e){var t=document.createElement("p");t.style.wordWrap="break-word",t.innerHTML="INFO "+getCurrentDate()+" "+e+"<b> readyState: "+websocket.readyState+" bufferedAmount: "+websocket.bufferedAmount+"</b>",attributes_log.appendChild(t)}function writeToScreen(e){var t=document.createElement("p");t.style.wordWrap="break-word",t.innerHTML=e,output.appendChild(t)}function getCurrentDate(){var e=new Date;return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}function browserSupportsWebSockets(){return"WebSocket"in window}function getTimeMillis(){return parseInt(Date.now().toString())}function register(){try{var e='{"type":"register", "sdid":"'+device_id+'", "Authorization":"bearer '+device_token+'", "cid":"'+getTimeMillis()+'"}';websocket.send(e,{mask:!0}),isWebSocketReady=!0}catch(e){}}function handleRcvMsg(e){var t=JSON.parse(e);if("action"==t.type){var o=t.data.actions,r=o[0].parameters.text;o[0].parameters.text2;console.log("The received action is "+o),document.getElementById("rainbow").innerHTML="Capacity: 4,  Free Slots: "+r}}var output,attributes_log,websocket,wsUri="wss://api.artik.cloud/v1.1/websocket?ack=true",device_id="041de6aca7274d88a52f0d78eeebc740",device_token="89c320eb42a7494bb819caf9f8ad4f8c";